(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{33:function(e,t,a){e.exports=a(68)},38:function(e,t,a){},43:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),l=(a(38),a(2)),o=a(15),u=Object(o.b)({name:"weather",initialState:{error:!1,units:"metric",lang:"es",currentWeather:{},cities:[]},reducers:{updateError:function(e,t){e.error=t.payload,e.loading=!1},updateUnits:function(e,t){e.units=t.payload},updateLang:function(e,t){e.lang=t.payload},updateLocalWeather:function(e,t){e.currentWeather={localWeather:t.payload.localWeather,localForecast:t.payload.localForecast},e.loading=!1},updateCities:function(e,t){e.cities=t.payload}}}),m=u.actions,s=u.reducer,d=m.updateError,p=m.updateLang,f=m.updateUnits,h=m.updateLocalWeather,E=m.updateCities,v=s;a(43);function b(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.weatherReducer.lang})),a=Object(l.c)((function(e){return e.weatherReducer.units}));return r.a.createElement("header",null,r.a.createElement("div",{className:"header-logo"},r.a.createElement("img",{src:"https://openweathermap.org/themes/openweathermap/assets/img/logo_white_cropped.png",alt:"Logo"})),r.a.createElement("div",{className:"header-options"},r.a.createElement("div",{className:"temp-switch"},r.a.createElement("h3",null,"F \xba"),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:"metric"===a,onChange:function(){e(f("metric"===a?"imperial":"metric"))}}),r.a.createElement("span",null),r.a.createElement("i",{className:"indicator"})),r.a.createElement("h3",null,"C \xba")),r.a.createElement("div",{className:"lang-switch"},r.a.createElement("img",{src:"https://www.countryflags.io/".concat("es"===t?"ar":"en"===t?"gb":t,"/flat/32.png"),alt:"".concat(t," flag")}),r.a.createElement("select",{name:"language",onChange:function(t){var a=t.target.value;e(p(a))}},["es","en","fr"].map((function(e){return r.a.createElement("option",{key:e,value:e},e.toUpperCase())}))))))}var g=a(3),w=a.n(g),y=a(16),x=a(8),N={weatherReducer:v},O=Object(o.a)({reducer:N}),j="http://localhost:4000/v1",C=O,k=a(11),R=a.n(k),F=a(9),_=a.n(F),W=function(e,t){return function(){var a=Object(x.a)(w.a.mark((function a(n,r){var c,i,l,o,u,m;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=r().weatherReducer,i=c.units,l=c.lang,o=c.cities,a.next=3,D(e,{units:i,lang:l});case 3:"error"===(u=a.sent)?n(d(!0)):(m=Object(y.a)(o),"number"===typeof t?m[t]=u:m.push(u),n(E(m)));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},D=function(){var e=Object(x.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(j,"/current/").concat(t),{params:a}).then(function(){var e=Object(x.a)(w.a.mark((function e(n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(j,"/forecast/").concat(t),{params:a}).then((function(e){for(var t=e.data.list,a={},r=0;r<t.length;r++)if(_()(t[r].dt_txt).format("D")!==_()().format("D")){var c=_()(t[r].dt_txt).format("M[/]D");void 0===a[c]&&(a[c]={}),void 0===a[c].max&&(a[c].max=0),a[c].max=t[r].main.temp_max>=a[c].max?t[r].main.temp_max:a[c].max,void 0===a[c].min&&(a[c].min=1e3),a[c].min=t[r].main.temp_min<=a[c].min?t[r].main.temp_min:a[c].min}return{currentWeather:n.data,currentForecast:a}})).catch((function(e){return"error"}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return"error"}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),L=a(5),z=a(6);a(64);function P(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.weatherReducer.currentWeather})),a=Object(l.c)((function(e){return e.weatherReducer.units})),c=Object(l.c)((function(e){return e.weatherReducer.lang})),i=t.localWeather,o=t.localForecast,u=o&&Object.keys(o);Object(n.useEffect)((function(){e((function(e,t){var a=t().weatherReducer,n=a.units,r=a.lang;R.a.get("".concat(j,"/location/"),{params:{units:n,lang:r}}).then((function(t){R.a.get("".concat(j,"/forecast/"),{params:{units:n,lang:r}}).then((function(a){for(var n=a.data.list,r={},c=0;c<n.length;c++)if(_()(n[c].dt_txt).format("D")!==_()().format("D")){var i=_()(n[c].dt_txt).format("M[/]D");void 0===r[i]&&(r[i]={}),void 0===r[i].max&&(r[i].max=0),r[i].max=n[c].main.temp_max>=r[i].max?n[c].main.temp_max:r[i].max,void 0===r[i].min&&(r[i].min=1e3),r[i].min=n[c].main.temp_min<=r[i].min?n[c].main.temp_min:r[i].min}e(h({localWeather:t.data,localForecast:r}))})).catch((function(t){e(d(!0))}))})).catch((function(t){e(d(!0))}))}))}),[e,a,c]);var m=function(){return r.a.createElement("div",{className:"loading"},r.a.createElement(L.a,{size:"6x",icon:z.d}))},s=function(){return r.a.createElement("div",{className:"current-container"},r.a.createElement("h1",null,i.name),r.a.createElement("div",{className:"current-body"},r.a.createElement("div",{className:"today"},r.a.createElement("div",{className:"current-day"},r.a.createElement("span",null,r.a.createElement("img",{height:"150px",src:"http://openweathermap.org/img/wn/".concat(p,"@4x.png"),alt:"weather icon"})),r.a.createElement("div",{className:"current-description"},r.a.createElement("h2",null,i.main.temp," ","metric"===a?"C \xba":"F \xba"),i.weather[0].description)),r.a.createElement("div",{className:"current-more-info"},r.a.createElement("div",null,r.a.createElement(L.a,{icon:z.b}),i.main.temp_max," ","metric"===a?"C \xba":"F \xba"),r.a.createElement("div",null,r.a.createElement(L.a,{icon:z.a}),i.main.temp_min," ","metric"===a?"C \xba":"F \xba"))),r.a.createElement("div",{className:"forecast"},r.a.createElement("ul",null,u.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("div",{className:"day"},e),r.a.createElement("div",{className:"temps"},r.a.createElement(L.a,{icon:z.b}),o[e].max," ","metric"===a?"C \xba":"F \xba",r.a.createElement(L.a,{icon:z.a}),o[e].min," ","metric"===a?"C \xba":"F \xba"))}))))))},p=i&&i.weather[0].icon;return i?r.a.createElement(s,null):r.a.createElement(m,null)}var S=a(32);a(65);function U(e){var t=e.index,a=e.weather,c=e.changeCity,i=e.deleteCard,o=a.currentWeather,u=a.currentForecast,m=Object.keys(u),s=Object(l.c)((function(e){return e.weatherReducer.units})),d=Object(n.useRef)(null),p=Object(n.useRef)(null),f=Object(n.useRef)(null),h=function(){p.current.classList.toggle("active"),f.current.classList.toggle("active")},E=function(){var e=Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c(d.current.value,t));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=o.weather[0].icon;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-front",ref:p},r.a.createElement("div",{className:"card-top"},r.a.createElement("button",{onClick:function(){i(t)},className:"button-close"},"X"),r.a.createElement("input",{ref:d,onKeyPress:function(e){"Enter"===e.key&&E()},type:"text",className:"search",placeholder:"Ciudad/City/Ville"}),r.a.createElement("button",{onClick:h,className:"button-info"},"i")),r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",null,o.name),r.a.createElement("div",{className:"card-current"},r.a.createElement("span",null,r.a.createElement("img",{src:"http://openweathermap.org/img/wn/".concat(v,"@2x.png"),alt:"weather icon"})),r.a.createElement("div",{className:"card-description"},r.a.createElement("h3",null,o.main.temp," ","metric"===s?"C \xba":"F \xba"),r.a.createElement("p",null,o.weather[0].description))),r.a.createElement("div",{className:"card-more-info"},r.a.createElement("div",null,r.a.createElement(L.a,{icon:z.b}),r.a.createElement("p",null,o.main.temp_max," ","metric"===s?"C \xba":"F \xba")),r.a.createElement("div",null,r.a.createElement(L.a,{icon:z.a}),r.a.createElement("p",null,o.main.temp_min," ","metric"===s?"C \xba":"F \xba"))))),r.a.createElement("div",{className:"card-back",ref:f},r.a.createElement("div",{className:"card-top"},r.a.createElement("button",{onClick:h,className:"button-info"},"i")),r.a.createElement("div",{className:"card-body"},r.a.createElement("ul",null,m.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("div",{className:"day"},e),r.a.createElement("div",{className:"temps"},r.a.createElement(L.a,{icon:z.b}),u[e].max," ","metric"===s?"C \xba":"F \xba",r.a.createElement(L.a,{icon:z.a}),u[e].min," ","metric"===s?"C \xba":"F \xba"))}))))))}a(66);function q(){var e=Object(l.b)(),t=Object(n.useState)(!1),a=Object(S.a)(t,2),c=a[0],i=a[1],o=Object(l.c)((function(e){return e.weatherReducer.cities})),u=Object(l.c)((function(e){return e.weatherReducer.units})),m=Object(l.c)((function(e){return e.weatherReducer.lang})),s=Object(l.c)((function(e){return e.weatherReducer.error})),p=Object(l.c)((function(e){return e.weatherReducer.currentWeather})).localWeather,f=Object(n.useRef)(null);Object(n.useEffect)((function(){e(function(){var e=Object(x.a)(w.a.mark((function e(t,a){var n,r,c,i,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a().weatherReducer,r=n.units,c=n.lang,i=n.cities,l=Object(y.a)(i).map((function(e){return new Promise(function(){var t=Object(x.a)(w.a.mark((function t(a,n){var i,l;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.currentWeather.name,t.next=3,D(i,{units:r,lang:c});case 3:"error"===(l=t.sent)&&n("error"),a(l);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())})),Promise.all(l).then((function(e){e.includes("error")&&t(d(!0)),t(E(e))}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}),[e,u,m]);var h=Object(n.useCallback)((function(){e(d(!1))}),[e]);Object(n.useEffect)((function(){s&&i(r.a.createElement("div",{className:"error-black"},r.a.createElement("div",{className:"error-show"},"es"===m?"Hubo un error en su pedido. Revise la ciudad ingresada. De lo contrario intente nuevamente en unos momentos.":"en"===m?"There was an error in your request. Check the city entered. Otherwise try again in a few moments.":"Une erreur s'est produite dans votre commande. V\xe9rifiez la ville saisie. Sinon, r\xe9essayez dans quelques instants.",r.a.createElement("button",{onClick:h},"es"===m?"Cerrar":"en"===m?"Close":"Fermer"," ")))),!s&&i(null)}),[h,s,m]);var v=function(t,a){e(W(t,a))},b=function(t){e(function(e){return function(t,a){var n=Object(y.a)(a().weatherReducer.cities);n.splice(e,1),t(E(n))}}(t))};return p?r.a.createElement(r.a.Fragment,null,c,r.a.createElement("div",{className:"cities-body"},r.a.createElement("div",{className:"cities-weather"},o.map((function(e,t){return r.a.createElement(U,{key:t,index:t,weather:e,changeCity:v,deleteCard:b})})),o.length<=4?r.a.createElement("div",{className:"cities-add"},r.a.createElement("input",{className:"cities-input",ref:f,type:"text",placeholder:"Ciudad/City/Ville",onKeyPress:function(t){"Enter"===t.key&&e(W(f.current.value))}}),r.a.createElement(L.a,{color:"white",size:"4x",icon:z.c})):null))):null}a(67);var M=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(b,null),r.a.createElement(P,null),r.a.createElement(q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(l.a,{store:C},r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.a821ca81.chunk.js.map